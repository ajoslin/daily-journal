var App=angular.module("dailyJournal",["firebase","ngAnimate","pasvaz.bindonce"]).constant("Firebase",Firebase).constant("moment",moment).constant("appFirebase",new Firebase("http://daily-journal.firebaseio.com")).controller("AppCtrl",["$scope","moment","$user","appFirebase","jsonDateFilter",function(e,t,n,a,o){function r(e){if(c.off("value"),e.val()){var t=e.val();t&&i(e.val())}}function i(n){function a(){var e=document.querySelector(".card.today"),t=document.querySelector(".scroll-content");t.scrollTop=e.offsetTop-20}var r=o(),i=[];angular.forEach(n||{},function(e,t){t!=r&&i.push({date:t,text:e})}),i=i.sort(function(e,n){return t(e.date).isAfter(n.date)?1:-1}),e.oldEntries=i,a(),setTimeout(a)}e.prettyDate=function(e){return t(e).format("dddd, MMMM Do, YYYY")},e.$user=n;var c;e.$watch("$user.authenticated()",function(e){e&&(c=a.child("entries").child(n.uid()),c.on("value",r))})}]);